!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js"],e):"object"==typeof exports?exports["chartjs-chart-bar-plus"]=e(require("chart.js")):t["chartjs-chart-bar-plus"]=e(t["chart.js"])}(window,function(t){return function(t){var e={};function r(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(a,o,function(e){return t[e]}.bind(null,o));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(e,r){e.exports=t},function(t,e,r){"use strict";r.r(e);r(0);var a={changeBarThickness(){const t=this.getMeta(),e=this.getDataset().data,r=this.getIndexScale(),a=r.isHorizontal()?"width":"height";e.forEach((e,o)=>{const s=r.getBarThickness(e);t.data[o]._view[a]=s,t.data[o]._model[a]=s})}};const o=({pos:t,value:e,error:r,scale:a})=>{switch(t){case"start":return a.getPixelForValue(e-r);case"end":return a.getPixelForValue(e+r);case"mid":return a.getPixelForValue(e);default:throw new Error("Must supply a `pos` argument")}};var s={setupErrorStyles(){const t=this.getDataset(),e=t.data,r=Array.isArray(t.backgroundColor),a=[],{insignificantColor:o,animate:s}=this.chart.options.errorBars;e.forEach((e,i)=>{let n;e._animate=s,n=e.insignificant?o:r?t.backgroundColor[i]:t.backgroundColor,a.push(n)}),t.backgroundColor=a},drawErrorBar(){const t=this,e=t.chart.ctx,r=t.getMeta(),a=t.getValueScale(),s=a.isHorizontal(),i=(t=>t?"x":"y")(s),n=(t=>t?"y":"x")(s),c=t.getDataset().data,{width:l,color:h}=t.chart.options.errorBars;c.forEach((t,c)=>{const u=r.data[c]._view[n],d=t[i],p=t.error,f={ctx:e,datum:t,width:l,color:h},g=o({pos:"start",value:d,error:p,scale:a}),y=o({pos:"end",value:d,error:p,scale:a}),m=o({pos:"mid",value:d,error:p,scale:a});s?(f.startX=g,f.endX=y,f.midX=m,f.startY=f.endY=f.midY=u):(f.startY=g,f.endY=y,f.midY=m,f.startX=f.endX=f.midX=u),t._animate?(({ctx:t,width:e,color:r,startX:a,startY:o,endX:s,endY:i,midX:n,midY:c,datum:l})=>{let h=0,u=2,d=c,p=n;o==c&&(h=2,u=0);const f=()=>{t.beginPath(),t.lineWidth=e,t.strokeStyle=r,t.moveTo(n,c),t.lineTo(n-h,c-u),t.stroke(),t.moveTo(p,d),t.lineTo(p+h,d+u),t.stroke(),n-=h,d+=u,p+=h,(c-=u)>i||n>a?window.requestAnimationFrame(f):l._animate=!1};setTimeout(f,1e3)})(f):(({ctx:t,width:e,color:r,startX:a,startY:o,endX:s,endY:i})=>{t.lineWidth=e,t.strokeStyle=r,t.beginPath(),t.moveTo(a,o),t.lineTo(s,i),t.stroke()})(f)})}};Chart="function"==typeof Chart?Chart:window.Chart,function(t){const e=t.scaleService,r=e.getScaleConstructor("category").extend({getPixelForValue(t,e,r){const a=this.options.offset;"number"!=typeof r&&(r=0);const o=this.chart.data.datasets[r].data[e],s=this._getCategoryThickness(o);let i=this._calcOffset(e,r);return a&&(i+=s/2),this._offsetBase()+i},getBarThickness(t){return t.thickness*this._axisSize()-2*this._spacingSize()},_spacingSize(){return this._axisSize()*this.options.spacing},_offsetBase(){return this.isHorizontal()?this.left:this.top},_axisSize(){return this.isHorizontal()?this.width:this.height},_getCategoryThickness(t){return this.getBarThickness(t)+2*this._spacingSize()},_calcOffset(t,e){const r=this;return r.chart.data.datasets[e].data.slice(r.minIndex,t).reduce((t,e)=>t+r._getCategoryThickness(e),0)}});e.registerScaleType("categoryPlus",r,{spacing:.01,position:"bottom",categoryPercentage:1,barPercentage:1,offset:!0,gridLines:{display:!1,offsetGridLines:!0}})}(Chart),function(t){const e=t.scaleService,r=e.getScaleConstructor("linear").extend({determineDataLimits(){const t=this;t.chart.options.errorBars.show||CategoryScale.prototype.determineDataLimits.call(this);let e=0,r=0;const{datasets:a}=t.chart.data;a.forEach(a=>{a.data.forEach(a=>{const o=t.getRightValue(a),s=o-a.error,i=o+a.error;e=Math.min(e,s),r=Math.max(r,i)})}),t.min=e,t.max=r}});e.registerScaleType("linearWithError",r,{position:"left"})}(Chart),function(t){const e=t.helpers,r={errorBars:{show:!0,animate:!0,color:"rgba(255, 20, 20, 0.3)",width:2,insignificantColor:"rgba(200, 200, 200, 0.8)"},barThickness:{min:10,max:100}};t.defaults.barPlus=e.extend(t.defaults.bar,r,{scales:{xAxes:[{type:"categoryPlus"}],yAxes:[{type:"linearWithError"}]}}),t.defaults.horizontalBarPlus=e.extend(t.defaults.horizontalBar,r,{scales:{xAxes:[{type:"linearWithError"}],yAxes:[{type:"categoryPlus"}]}});const o={initialize(e,r){t.controllers.bar.prototype.initialize.apply(this,arguments),e.options.errorBars.show&&this.setupErrorStyles()},update(e){t.controllers.bar.prototype.update.call(this,e),this.chart.options.errorBars.show&&this.drawErrorBar(),this.changeBarThickness()},draw(e){t.controllers.bar.prototype.draw.call(this,e),this.chart.options.errorBars.show&&this.drawErrorBar()}};e.extend(o,s,a),t.controllers.barPlus=t.controllers.bar.extend(o),t.controllers.horizontalBarPlus=t.controllers.horizontalBar.extend(o)}(Chart)}])});