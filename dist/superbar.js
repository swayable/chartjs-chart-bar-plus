!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["chartjs-chart-superbar"]=e():t["chartjs-chart-superbar"]=e()}(window,function(){return function(t){var e={};function r(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(a,o,function(e){return t[e]}.bind(null,o));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);const a=({pos:t,value:e,error:r,scale:a})=>{switch(t){case"start":return a.getPixelForValue(e-r);case"end":return a.getPixelForValue(e+r);case"mid":return a.getPixelForValue(e);default:throw new Error("Must supply a `pos` argument")}};var o={setupErrorStyles(){const t=this.getDataset(),e=t.data,r=Array.isArray(t.backgroundColor),a=[],{insignificantColor:o}=this.chart.options.errorBars;e.forEach((e,s)=>{let i;i=e.insignificant?o:r?t.backgroundColor[s]:t.backgroundColor,a.push(i)}),t.backgroundColor=a},drawErrorBar(t){const e=this,r=e.index,{datasets:o}=e.chart.data,s=e.chart.ctx,i=e.getMeta(),n=e.getValueScale(),c=n.isHorizontal(),l=(t=>t?"y":"x")(c),h=e.getDataset().data,{width:d,color:u}=e.chart.options.errorBars;e.chart.__initialRender=e.chart.__initialRender||1===t,e.chart.__initialRender&&h.forEach((t,h)=>{const f=i.data[h]._view[l],p=t.error,g={ctx:s,datum:t,width:d,color:u};if(!p)return;let y=0;if(n.options.stacked||void 0!==i.stack)for(let t=0;t<r;t++){if(e.chart.getDatasetMeta(t).stack!==i.stack)continue;const r=o[t].data[h];y+=n.getRightValue(r)}const x=y+n.getRightValue(t),b=a({pos:"start",value:x,error:p,scale:n}),m=a({pos:"end",value:x,error:p,scale:n}),w=a({pos:"mid",value:x,error:p,scale:n});c?(g.startX=b,g.endX=m,g.midX=w,g.startY=g.endY=g.midY=f):(g.startY=b,g.endY=m,g.midY=w,g.startX=g.endX=g.midX=f),(({ctx:t,width:e,color:r,startX:a,startY:o,endX:s,endY:i})=>{t.save(),t.lineWidth=e,t.strokeStyle=r,t.beginPath(),t.moveTo(a,o),t.lineTo(s,i),t.stroke(),t.restore()})(g)})}};var s={changeBarThickness(){const t=this.getMeta(),e=this.getDataset().data,r=this.getIndexScale(),a=r.isHorizontal()?"width":"height";e.forEach((e,o)=>{const s=r.getBarThickness(e);t.data[o]._view[a]=s,t.data[o]._model[a]=s})}};Chart="function"==typeof Chart?Chart:window.Chart,function(t){const e=t.scaleService,r=e.getScaleConstructor("category").extend({getPixelForValue(t,e,r){const a=this,o=a.options.offset;let s=e;if(void 0!==t&&"number"!=typeof s){const e=a.getRightValue(t);s=a.getLabels().indexOf(e)}"number"!=typeof r&&(r=0);const i=a.chart.data.datasets[r].data[s],n=a._getCategoryThickness(i);let c=a._calcOffset(e,r);return o&&(c+=n/2),this._offsetBase()+c},getBarThickness(t){return t.thickness*this._axisSize()-2*this.options.spacing},_offsetBase(){return this.isHorizontal()?this.left:this.top},_axisSize(){return this.isHorizontal()?this.width:this.height},_getCategoryThickness(t){return this.getBarThickness(t)+2*this.options.spacing},_calcOffset(t,e){const r=this;return r.chart.data.datasets[e].data.slice(r.minIndex,t).reduce((t,e)=>t+r._getCategoryThickness(e),0)}});e.registerScaleType("thickCategory",r,{spacing:2,position:"bottom",categoryPercentage:1,barPercentage:1,offset:!0,gridLines:{display:!1,offsetGridLines:!0}})}(Chart),function(t){const e=t.scaleService,r=e.getScaleConstructor("linear"),a=r.extend({determineDataLimits(){const t=this;if(!t.chart.options.errorBars.show)return r.prototype.determineDataLimits.call(this);let e=0,a=0;const{datasets:o}=t.chart.data;o.forEach(r=>{r.data.forEach(r=>{const o=t.getRightValue(r),s=o-r.error,i=o+r.error;e=Math.min(e,s),a=Math.max(a,i)})}),t.min=e,t.max=a}});e.registerScaleType("linearWithError",a,{position:"left"})}(Chart),function(t){const e=t.helpers,r={errorBars:{show:!0,color:"rgba(255, 20, 20, 0.3)",width:2,insignificantColor:"rgba(200, 200, 200, 0.8)"}};t.defaults.superBar=e.extend(t.defaults.bar,r,{scales:{xAxes:[{type:"thickCategory"}],yAxes:[{type:"linearWithError"}]}}),t.defaults.horizontalSuperBar=e.extend(t.defaults.horizontalBar,r,{scales:{xAxes:[{type:"linearWithError"}],yAxes:[{type:"thickCategory"}]}});const a={initialize(e,r){t.controllers.bar.prototype.initialize.apply(this,arguments),e.options.errorBars.show&&this.setupErrorStyles()},update(e){t.controllers.bar.prototype.update.call(this,e),this.chart.options.errorBars.show&&this.drawErrorBar(),this.changeBarThickness()},draw(e){t.controllers.bar.prototype.draw.call(this,e),this.chart.options.errorBars.show&&this.drawErrorBar(e)}};e.extend(a,o,s),t.controllers.superBar=t.controllers.bar.extend(a),t.controllers.horizontalSuperBar=t.controllers.horizontalBar.extend(a)}(Chart)}])});